<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebChat - 登录</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 登录表单 -->
        <div class="form-container login-form active">
            <h2 class="form-title">用户登录</h2>
            <div class="alert" id="login-alert"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="login-username" class="form-label">用户名</label>
                    <input type="text" id="login-username" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="login-password" class="form-label">密码</label>
                    <input type="password" id="login-password" class="form-input" required>
                </div>
                <button type="submit" class="btn">登录</button>
            </form>
            <div class="form-footer">
                <a href="#" class="form-link" id="forgot-password-link">忘记密码？</a> | 
                <a href="#" class="form-link" id="register-link">注册账号</a>
            </div>
        </div>

    <script>
        //获得登录按钮
        const loginBtn = document.getElementsByClassName("btn")[0]
        //获得登录表单
        const loginForm = document.getElementById("loginForm")

        loginBtn.addEventListener("click",async(e) =>{
                e.preventDefault() //阻止表单默认提交行为
                const username = loginForm['login-username'].value
                const password = loginForm['login-password'].value
                console.log("用户名:",username)
                console.log("密码:",password)
                const data = {
                    username: username,
                    password: password
                }
                try{
                    const response = await fetch('localhost:3000/api/login' , {
                    method:'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    if (!response.ok)throw new Error("登录失败")
                    const result = await response.json()
                    console.log("登录成功:",result)
                } catch (error){
                    console.error("错误:",error)
                }          
            })
    </script>
</body>
</html>